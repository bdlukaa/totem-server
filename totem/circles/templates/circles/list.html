{% extends "base.html" %}
{% load static %}
{% load avatar %}
{# djlint:off #}
{% block title %}Circles{% endblock title %}
{# djlint:on #}
{% block javascript %}
{% endblock javascript %}
{% block content %}
    <div class="px-5">
        <section class="max-w-5xl m-auto pb-20">
            <h1 class="h1 text-center pb-10">Circles</h1>
            {% if attending_events %}
                <h2 class="h2 pb-5">My Circles</h2>
                <ul role="list" class="grid grid-cols-1 gap-6 pb-5 sm:grid-cols-3">
                    {% for event_item in attending_events %}
                        <li class="col-span-1 divide-y hover:tshadow divide-gray-200 transition-all duration-500 rounded-3xl bg-white">
                            <a href="{% url 'circles:event_detail' event_slug=event_item.event.slug %}">
                                <div class="flex w-full items-start justify-between space-x-6 p-6">
                                    <div class="flex-1">
                                        <h2 class="h2 text-gray-900 text-lg">{{ event_item.event.circle.title }}</h2>
                                        {% if event_item.joinable %}
                                            <p class="text-red-500">Join now!</p>
                                        {% else %}
                                            <p class="text-red-500">{{ event_item.event.start|date:"D, M j, g:i a T" }}</p>
                                        {% endif %}
                                    </div>
                                </div>
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
            <h2 class="h2 pb-5">Upcoming Circles</h2>
            <ul role="list" class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                {% for event in circles %}
                    <t-card
                    {% if event.circle.image %}image="{{ event.circle.image.url }}"{% endif %}
                    href="{% url "circles:event_detail" event_slug=event.slug %}">
                    <span slot="title">{{ event.circle.title }}</span>
                    <span slot="description">By {{ event.circle.author.name }}</span>
                    <span slot="buttonText">Join</span>
                    <span slot="avatar">{% avatar event.circle.author %}</span>
                    <span slot="start">{{ event.start|date:'M jS' }} @
                        <div>{{ event.start|date:'P T' }}</div>
                    </span>
                    </t-card>
                {% empty %}
                    <h2 class="h2">No Circles. ðŸ˜¥</h2>
                {% endfor %}
            </ul>
        </section>
    </div>
{% endblock content %}
